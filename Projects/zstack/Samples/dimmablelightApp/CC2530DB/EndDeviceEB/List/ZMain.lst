###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         24/Dec/2025  16:58:19 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\ZMain\TI2530DB\ZMain.c       #
#    Command line       =  -f E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ #
#                          ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmablelightApp\ #
#                          CC2530DB\..\..\..\Tools\CC2530DB\f8wEndev.cfg      #
#                          (-DCPU32MHZ -DROOT=__near_func                     #
#                          -DMAC_CFG_TX_DATA_MAX=3 -DMAC_CFG_TX_MAX=6         #
#                          -DMAC_CFG_RX_MAX=3) -f E:\´«¸ÐÆ÷ZStack-CC2530\´«¸Ð #
#                          Æ÷ZStack-CC2530-ÊµÑµ×îÖÕ°æ±¾\Projects\zstack\Sampl #
#                          es\dimmablelightApp\CC2530DB\..\..\..\Tools\CC2530 #
#                          DB\f8wConfig.cfg (-DZIGBEEPRO -DSECURE=0           #
#                          -DZG_SECURE_DYNAMIC=0 -DREFLECTOR                  #
#                          -DDEFAULT_CHANLIST26=0x04000000                    #
#                          -DDEFAULT_CHANLIST25=0x02000000                    #
#                          -DDEFAULT_CHANLIST24=0x01000000                    #
#                          -DDEFAULT_CHANLIST23=0x00800000                    #
#                          -DDEFAULT_CHANLIST22=0x00400000                    #
#                          -DDEFAULT_CHANLIST21=0x00200000                    #
#                          -DDEFAULT_CHANLIST20=0x00100000                    #
#                          -DDEFAULT_CHANLIST19=0x00080000                    #
#                          -DDEFAULT_CHANLIST18=0x00040000                    #
#                          -DDEFAULT_CHANLIST17=0x00020000                    #
#                          -DDEFAULT_CHANLIST16=0x00010000                    #
#                          -DDEFAULT_CHANLIST15=0x00008000                    #
#                          -DDEFAULT_CHANLIST14=0x00004000                    #
#                          -DDEFAULT_CHANLIST13=0x00002000                    #
#                          -DDEFAULT_CHANLIST12=0x00001000                    #
#                          -DDEFAULT_CHANLIST11=0x00000800                    #
#                          -DDEFAULT_CHANLIST=DEFAULT_CHANLIST25              #
#                          -DZDAPP_CONFIG_PAN_ID=0x0006                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 E:\´«¸ÐÆ÷ZStack-CC2530\´«¸Ð #
#                          Æ÷ZStack-CC2530-ÊµÑµ×îÖÕ°æ±¾\Projects\zstack\ZMain #
#                          \TI2530DB\ZMain.c -D NWK_AUTO_POLL -D ZTOOL_P1 -D  #
#                          MT_TASK -D MT_SYS_FUNC -D MT_ZDO_FUNC -D           #
#                          LCD_SUPPORTED=DEBUG -D xPOWER_SAVING -lC           #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\EndDeviceEB\List\ -lA                        #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\EndDeviceEB\List\ --diag_suppress            #
#                          Pe001,Pa010 -o E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack #
#                          -CC2530-ÊµÑµ×îÖÕ°æ±¾\Projects\zstack\Samples\dimma #
#                          blelightApp\CC2530DB\EndDeviceEB\Obj\ -e           #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ #
#                          ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmablelightApp\ #
#                          CC2530DB\ -I E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-C #
#                          C2530-ÊµÑµ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmabl #
#                          elightApp\CC2530DB\..\Source\ -I                   #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\ZMain\TI2530DB\ -I                  #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\hal\include\ -I    #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\hal\target\CC2530E #
#                          B\ -I E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-Ê #
#                          µÑµ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmablelightA #
#                          pp\CC2530DB\..\..\..\..\..\Components\mac\include\ #
#                           -I E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑ #
#                          µ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmablelightApp #
#                          \CC2530DB\..\..\..\..\..\Components\mac\high_level #
#                          \ -I E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-Êµ #
#                          Ñµ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmablelightAp #
#                          p\CC2530DB\..\..\..\..\..\Components\mac\low_level #
#                          \srf04\ -I E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2 #
#                          530-ÊµÑµ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmablel #
#                          ightApp\CC2530DB\..\..\..\..\..\Components\mac\low #
#                          _level\srf04\single_chip\ -I                       #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\mt\ -I             #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\osal\include\ -I   #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\services\saddr\    #
#                          -I E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ #
#                          ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmablelightApp\ #
#                          CC2530DB\..\..\..\..\..\Components\services\sdata\ #
#                           -I E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑ #
#                          µ×îÖÕ°æ±¾\Projects\zstack\Samples\dimmablelightApp #
#                          \CC2530DB\..\..\..\..\..\Components\stack\af\ -I   #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\stack\nwk\ -I      #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\stack\sapi\ -I     #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\stack\sec\ -I      #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\stack\sys\ -I      #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\stack\zdo\ -I      #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\zmac\ -I           #
#                          E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\..\..\..\..\..\Components\zmac\f8w\ -Ohz     #
#                          --require_prototypes                               #
#    List file          =  E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\EndDeviceEB\List\ZMain.lst                   #
#    Object file        =  E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖ #
#                          Õ°æ±¾\Projects\zstack\Samples\dimmablelightApp\CC2 #
#                          530DB\EndDeviceEB\Obj\ZMain.r51                    #
#                                                                             #
#                                                                             #
###############################################################################

E:\´«¸ÐÆ÷ZStack-CC2530\´«¸ÐÆ÷ZStack-CC2530-ÊµÑµ×îÖÕ°æ±¾\Projects\zstack\ZMain\TI2530DB\ZMain.c
      1          /**************************************************************************************************
      2            Filename:       ZMain.c
      3            Revised:        $Date: 2010-09-17 16:25:30 -0700 (Fri, 17 Sep 2010) $
      4            Revision:       $Revision: 23835 $
      5          
      6            Description:    Startup and shutdown code for ZStack
      7            Notes:          This version targets the Chipcon CC2530
      8          
      9          
     10            Copyright 2005-2010 Texas Instruments Incorporated. All rights reserved.
     11          
     12            IMPORTANT: Your use of this Software is limited to those specific rights
     13            granted under the terms of a software license agreement between the user
     14            who downloaded the software, his/her employer (which must be your employer)
     15            and Texas Instruments Incorporated (the "License").  You may not use this
     16            Software unless you agree to abide by the terms of the License. The License
     17            limits your use, and you acknowledge, that the Software may not be modified,
     18            copied or distributed unless embedded on a Texas Instruments microcontroller
     19            or used solely and exclusively in conjunction with a Texas Instruments radio
     20            frequency transceiver, which is integrated into your product.  Other than for
     21            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     22            works of, modify, distribute, perform, display or sell this Software and/or
     23            its documentation for any purpose.
     24          
     25            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     26            PROVIDED “AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     27            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     28            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     29            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     30            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     31            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     32            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     33            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     34            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     35            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     36          
     37            Should you have any questions regarding your right to use this Software,
     38            contact Texas Instruments Incorporated at www.TI.com.
     39          **************************************************************************************************/
     40          
     41          /*********************************************************************
     42           * INCLUDES
     43           */
     44          
     45          #ifndef NONWK
     46          #include "AF.h"
     47          #endif
     48          #include "hal_adc.h"

   \                                 In  segment SFR_AN, at 0x80
   \   union <unnamed> volatile __sfr _A_P0
   \                     _A_P0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x9d
   \   unsigned char volatile __sfr SLEEPSTA
   \                     SLEEPSTA:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0x9e
   \   unsigned char volatile __sfr CLKCONSTA
   \                     CLKCONSTA:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa0
   \   union <unnamed> volatile __sfr _A_P2
   \                     _A_P2:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xbe
   \   unsigned char volatile __sfr SLEEPCMD
   \                     SLEEPCMD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc6
   \   unsigned char volatile __sfr CLKCONCMD
   \                     CLKCONCMD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf6
   \   unsigned char volatile __sfr P1INP
   \                     P1INP:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfd
   \   unsigned char volatile __sfr P0DIR
   \                     P0DIR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xff
   \   unsigned char volatile __sfr P2DIR
   \                     P2DIR:
   \   000000                DS 1
     49          #include "hal_flash.h"
     50          #include "hal_lcd.h"
     51          #include "hal_led.h"
     52          #include "hal_drivers.h"
     53          #include "OnBoard.h"
     54          #include "OSAL.h"
     55          #include "OSAL_Nv.h"
     56          #include "ZComDef.h"
     57          #include "ZMAC.h"
     58          
     59          /*********************************************************************
     60           * LOCAL FUNCTIONS
     61           */
     62          
     63          static void zmain_ext_addr( void );
     64          #if defined ZCL_KEY_ESTABLISH
     65          static void zmain_cert_init( void );
     66          #endif
     67          static void zmain_dev_info( void );
     68          static void zmain_vdd_check( void );
     69          
     70          #ifdef LCD_SUPPORTED
     71          static void zmain_lcd_init( void );
     72          #endif
     73          
     74          /********************************************************************/
     75          void ParaProcess(void);//kkk

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     76          void ParaProcess(void)
   \                     ParaProcess:
     77          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
     78            //read zgDefaultChannelList,zgConfigPANID from NV   
     79            osal_nv_read( ZCD_NV_CHANLIST, 0, 4, &zgDefaultChannelList);  
   \   000005                ; Setup parameters for call to function osal_nv_read
   \   000005   75....       MOV     ?V0 + 0,#zgDefaultChannelList & 0xff
   \   000008   75....       MOV     ?V0 + 1,#(zgDefaultChannelList >> 8) & 0xff
   \   00000B   78..         MOV     R0,#?V0 + 0
   \   00000D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000010   75..04       MOV     ?V0 + 0,#0x4
   \   000013   75..00       MOV     ?V0 + 1,#0x0
   \   000016   78..         MOV     R0,#?V0 + 0
   \   000018   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00001B   7C00         MOV     R4,#0x0
   \   00001D   7D00         MOV     R5,#0x0
   \   00001F   7A84         MOV     R2,#-0x7c
   \   000021   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000024   12....       LCALL   ?DEALLOC_XSTACK8
     80            if( (zgDefaultChannelList!=DEFAULT_CHANLIST11)&&(zgDefaultChannelList!=DEFAULT_CHANLIST12)&&(zgDefaultChannelList!=DEFAULT_CHANLIST13)&&(zgDefaultChannelList!=DEFAULT_CHANLIST14)
     81              &&(zgDefaultChannelList!=DEFAULT_CHANLIST15)&&(zgDefaultChannelList!=DEFAULT_CHANLIST16)&&(zgDefaultChannelList!=DEFAULT_CHANLIST17)&&(zgDefaultChannelList!=DEFAULT_CHANLIST18)
     82              &&(zgDefaultChannelList!=DEFAULT_CHANLIST19)&&(zgDefaultChannelList!=DEFAULT_CHANLIST20)&&(zgDefaultChannelList!=DEFAULT_CHANLIST21)&&(zgDefaultChannelList!=DEFAULT_CHANLIST22)
     83              &&(zgDefaultChannelList!=DEFAULT_CHANLIST23)&&(zgDefaultChannelList!=DEFAULT_CHANLIST24)&&(zgDefaultChannelList!=DEFAULT_CHANLIST25)&&(zgDefaultChannelList!=DEFAULT_CHANLIST26))
   \   000027   90....       MOV     DPTR,#__Constant_800
   \   00002A   78..         MOV     R0,#?V0 + 0
   \   00002C   12....       LCALL   ?L_MOV_X
   \   00002F   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   000032   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   000035   78..         MOV     R0,#?V0 + 0
   \   000037   12....       LCALL   ?L_EQ_X
   \   00003A   7003         JNZ     $+5
   \   00003C   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   00003F   90....       MOV     DPTR,#__Constant_1000
   \   000042   78..         MOV     R0,#?V0 + 0
   \   000044   12....       LCALL   ?L_MOV_X
   \   000047   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   00004A   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   00004D   78..         MOV     R0,#?V0 + 0
   \   00004F   12....       LCALL   ?L_EQ_X
   \   000052   7003         JNZ     $+5
   \   000054   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   000057   90....       MOV     DPTR,#__Constant_2000
   \   00005A   78..         MOV     R0,#?V0 + 0
   \   00005C   12....       LCALL   ?L_MOV_X
   \   00005F   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   000062   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   000065   78..         MOV     R0,#?V0 + 0
   \   000067   12....       LCALL   ?L_EQ_X
   \   00006A   7003         JNZ     $+5
   \   00006C   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   00006F   90....       MOV     DPTR,#__Constant_4000
   \   000072   78..         MOV     R0,#?V0 + 0
   \   000074   12....       LCALL   ?L_MOV_X
   \   000077   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   00007A   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   00007D   78..         MOV     R0,#?V0 + 0
   \   00007F   12....       LCALL   ?L_EQ_X
   \   000082   7003         JNZ     $+5
   \   000084   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   000087   90....       MOV     DPTR,#__Constant_8000
   \   00008A   78..         MOV     R0,#?V0 + 0
   \   00008C   12....       LCALL   ?L_MOV_X
   \   00008F   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   000092   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   000095   78..         MOV     R0,#?V0 + 0
   \   000097   12....       LCALL   ?L_EQ_X
   \   00009A   7003         JNZ     $+5
   \   00009C   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   00009F   90....       MOV     DPTR,#__Constant_10000
   \   0000A2   78..         MOV     R0,#?V0 + 0
   \   0000A4   12....       LCALL   ?L_MOV_X
   \   0000A7   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   0000AA   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   0000AD   78..         MOV     R0,#?V0 + 0
   \   0000AF   12....       LCALL   ?L_EQ_X
   \   0000B2   7003         JNZ     $+5
   \   0000B4   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   0000B7   90....       MOV     DPTR,#__Constant_20000
   \   0000BA   78..         MOV     R0,#?V0 + 0
   \   0000BC   12....       LCALL   ?L_MOV_X
   \   0000BF   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   0000C2   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   0000C5   78..         MOV     R0,#?V0 + 0
   \   0000C7   12....       LCALL   ?L_EQ_X
   \   0000CA   7003         JNZ     $+5
   \   0000CC   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   0000CF   90....       MOV     DPTR,#__Constant_40000
   \   0000D2   78..         MOV     R0,#?V0 + 0
   \   0000D4   12....       LCALL   ?L_MOV_X
   \   0000D7   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   0000DA   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   0000DD   78..         MOV     R0,#?V0 + 0
   \   0000DF   12....       LCALL   ?L_EQ_X
   \   0000E2   7003         JNZ     $+5
   \   0000E4   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   0000E7   90....       MOV     DPTR,#__Constant_80000
   \   0000EA   78..         MOV     R0,#?V0 + 0
   \   0000EC   12....       LCALL   ?L_MOV_X
   \   0000EF   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   0000F2   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   0000F5   78..         MOV     R0,#?V0 + 0
   \   0000F7   12....       LCALL   ?L_EQ_X
   \   0000FA   7003         JNZ     $+5
   \   0000FC   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   0000FF   90....       MOV     DPTR,#__Constant_100000
   \   000102   78..         MOV     R0,#?V0 + 0
   \   000104   12....       LCALL   ?L_MOV_X
   \   000107   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   00010A   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   00010D   78..         MOV     R0,#?V0 + 0
   \   00010F   12....       LCALL   ?L_EQ_X
   \   000112   7003         JNZ     $+5
   \   000114   02....       LJMP    ??ParaProcess_0 & 0xFFFF
   \   000117   90....       MOV     DPTR,#__Constant_200000
   \   00011A   78..         MOV     R0,#?V0 + 0
   \   00011C   12....       LCALL   ?L_MOV_X
   \   00011F   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   000122   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   000125   78..         MOV     R0,#?V0 + 0
   \   000127   12....       LCALL   ?L_EQ_X
   \   00012A   6075         JZ      ??ParaProcess_0
   \   00012C   90....       MOV     DPTR,#__Constant_400000
   \   00012F   78..         MOV     R0,#?V0 + 0
   \   000131   12....       LCALL   ?L_MOV_X
   \   000134   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   000137   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   00013A   78..         MOV     R0,#?V0 + 0
   \   00013C   12....       LCALL   ?L_EQ_X
   \   00013F   6060         JZ      ??ParaProcess_0
   \   000141   90....       MOV     DPTR,#__Constant_800000
   \   000144   78..         MOV     R0,#?V0 + 0
   \   000146   12....       LCALL   ?L_MOV_X
   \   000149   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   00014C   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   00014F   78..         MOV     R0,#?V0 + 0
   \   000151   12....       LCALL   ?L_EQ_X
   \   000154   604B         JZ      ??ParaProcess_0
   \   000156   90....       MOV     DPTR,#__Constant_1000000
   \   000159   78..         MOV     R0,#?V0 + 0
   \   00015B   12....       LCALL   ?L_MOV_X
   \   00015E   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   000161   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   000164   78..         MOV     R0,#?V0 + 0
   \   000166   12....       LCALL   ?L_EQ_X
   \   000169   6036         JZ      ??ParaProcess_0
   \   00016B   90....       MOV     DPTR,#__Constant_2000000
   \   00016E   78..         MOV     R0,#?V0 + 0
   \   000170   12....       LCALL   ?L_MOV_X
   \   000173   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   000176   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   000179   78..         MOV     R0,#?V0 + 0
   \   00017B   12....       LCALL   ?L_EQ_X
   \   00017E   6021         JZ      ??ParaProcess_0
   \   000180   90....       MOV     DPTR,#__Constant_4000000
   \   000183   78..         MOV     R0,#?V0 + 0
   \   000185   12....       LCALL   ?L_MOV_X
   \   000188   7583..       MOV     DPH,#(zgDefaultChannelList >> 8) & 0xff
   \   00018B   7582..       MOV     DPL,#zgDefaultChannelList & 0xff
   \   00018E   78..         MOV     R0,#?V0 + 0
   \   000190   12....       LCALL   ?L_EQ_X
   \   000193   600C         JZ      ??ParaProcess_0
     84                zgDefaultChannelList=DEFAULT_CHANLIST11;
   \   000195   90....       MOV     DPTR,#__Constant_800
   \   000198   12....       LCALL   ?XLOAD_R2345
   \   00019B   90....       MOV     DPTR,#zgDefaultChannelList
   \   00019E   12....       LCALL   ?XSTORE_R2345
     85            
     86            osal_nv_read( ZCD_NV_PANID, 0, 2, &zgConfigPANID);
   \                     ??ParaProcess_0:
   \   0001A1                ; Setup parameters for call to function osal_nv_read
   \   0001A1   75....       MOV     ?V0 + 0,#zgConfigPANID & 0xff
   \   0001A4   75....       MOV     ?V0 + 1,#(zgConfigPANID >> 8) & 0xff
   \   0001A7   78..         MOV     R0,#?V0 + 0
   \   0001A9   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001AC   75..02       MOV     ?V0 + 0,#0x2
   \   0001AF   75..00       MOV     ?V0 + 1,#0x0
   \   0001B2   78..         MOV     R0,#?V0 + 0
   \   0001B4   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001B7   7C00         MOV     R4,#0x0
   \   0001B9   7D00         MOV     R5,#0x0
   \   0001BB   7A83         MOV     R2,#-0x7d
   \   0001BD   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   0001C0   12....       LCALL   ?DEALLOC_XSTACK8
     87            if(zgConfigPANID == 0xffff)
   \   0001C3   90....       MOV     DPTR,#zgConfigPANID
   \   0001C6   E0           MOVX    A,@DPTR
   \   0001C7   F4           CPL     A
   \   0001C8   7003         JNZ     ??ParaProcess_1
   \   0001CA   A3           INC     DPTR
   \   0001CB   E0           MOVX    A,@DPTR
   \   0001CC   F4           CPL     A
   \                     ??ParaProcess_1:
   \   0001CD   7008         JNZ     ??ParaProcess_2
     88              zgConfigPANID = 0x0101;
   \   0001CF   90....       MOV     DPTR,#zgConfigPANID
   \   0001D2   7401         MOV     A,#0x1
   \   0001D4   F0           MOVX    @DPTR,A
   \   0001D5   A3           INC     DPTR
   \   0001D6   F0           MOVX    @DPTR,A
     89            
     90            osal_nv_read(ZCD_NV_NODEID, 0, 2, &zgDeviceNodeId);
   \                     ??ParaProcess_2:
   \   0001D7                ; Setup parameters for call to function osal_nv_read
   \   0001D7   75....       MOV     ?V0 + 0,#zgDeviceNodeId & 0xff
   \   0001DA   75....       MOV     ?V0 + 1,#(zgDeviceNodeId >> 8) & 0xff
   \   0001DD   78..         MOV     R0,#?V0 + 0
   \   0001DF   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001E2   75..02       MOV     ?V0 + 0,#0x2
   \   0001E5   75..00       MOV     ?V0 + 1,#0x0
   \   0001E8   78..         MOV     R0,#?V0 + 0
   \   0001EA   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0001ED   7C00         MOV     R4,#0x0
   \   0001EF   7D00         MOV     R5,#0x0
   \   0001F1   7A01         MOV     R2,#0x1
   \   0001F3   7B04         MOV     R3,#0x4
   \   0001F5   12....       LCALL   ??Subroutine3_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   0001F8   12....       LCALL   ?DEALLOC_XSTACK8
     91            if(zgDeviceNodeId == 0xffff)
   \   0001FB   90....       MOV     DPTR,#zgDeviceNodeId
   \   0001FE   E0           MOVX    A,@DPTR
   \   0001FF   F4           CPL     A
   \   000200   7003         JNZ     ??ParaProcess_3
   \   000202   A3           INC     DPTR
   \   000203   E0           MOVX    A,@DPTR
   \   000204   F4           CPL     A
   \                     ??ParaProcess_3:
   \   000205   7009         JNZ     ??ParaProcess_4
     92              zgDeviceNodeId = 0x0001;
   \   000207   90....       MOV     DPTR,#zgDeviceNodeId
   \   00020A   7401         MOV     A,#0x1
   \   00020C   F0           MOVX    @DPTR,A
   \   00020D   A3           INC     DPTR
   \   00020E   E4           CLR     A
   \   00020F   F0           MOVX    @DPTR,A
     93          }
   \                     ??ParaProcess_4:
   \   000210   7F04         MOV     R7,#0x4
   \   000212   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   7B00         MOV     R3,#0x0
   \   000002                REQUIRE ??Subroutine3_0
   \   000002                ; // Fall through to label ??Subroutine3_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine3_0:
   \   000000   12....       LCALL   ??osal_nv_read?relay
   \   000003   7404         MOV     A,#0x4
   \   000005   22           RET
     94          
     95          /*********************************************************************
     96           * @fn      main
     97           * @brief   First function called after startup.
     98           * @return  don't care
     99           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    100          int main(void)
   \                     main:
    101          {
   \   000000                ; Auto size: 0
    102            uint16 i,j;
    103            // Turn off interrupts
    104            osal_int_disable( INTS_ALL );
   \   000000                ; Setup parameters for call to function osal_int_disable
   \   000000   79FF         MOV     R1,#-0x1
   \   000002   12....       LCALL   ??osal_int_disable?relay
    105          
    106            // Initialization for board related stuff such as LEDs
    107            HAL_BOARD_INIT();
   \   000005   53BEFB       ANL     0xbe,#0xfb
   \                     ??main_0:
   \   000008   E59D         MOV     A,0x9d
   \   00000A   A2E6         MOV     C,0xE0 /* A   */.6
   \   00000C   50FA         JNC     ??main_0
   \   00000E   00           NOP
   \   00000F   78F8         MOV     R0,#-0x8
   \   000011   7901         MOV     R1,#0x1
   \                     ??main_1:
   \   000013   00           NOP
   \   000014   E8           MOV     A,R0
   \   000015   24FF         ADD     A,#-0x1
   \   000017   18           DEC     R0
   \   000018   E9           MOV     A,R1
   \   000019   34FF         ADDC    A,#-0x1
   \   00001B   F9           MOV     R1,A
   \   00001C   E8           MOV     A,R0
   \   00001D   49           ORL     A,R1
   \   00001E   70F3         JNZ     ??main_1
   \   000020   75C600       MOV     0xc6,#0x0
   \                     ??main_2:
   \   000023   E59E         MOV     A,0x9e
   \   000025   70FC         JNZ     ??main_2
   \   000027   43BE04       ORL     0xbe,#0x4
   \   00002A   906270       MOV     DPTR,#0x6270
   \   00002D   7408         MOV     A,#0x8
   \   00002F   F0           MOVX    @DPTR,A
   \   000030   D2A0         SETB    0xa0.0
   \   000032   43FF01       ORL     0xff,#0x1
   \   000035   D280         SETB    0x80.0
   \   000037   43FD01       ORL     0xfd,#0x1
   \   00003A   D280         SETB    0x80.0
   \   00003C   43FD01       ORL     0xfd,#0x1
   \   00003F   43F604       ORL     0xf6,#0x4
    108          
    109            // Make sure supply voltage is high enough to run
    110            zmain_vdd_check();
   \   000042   7E10         MOV     R6,#0x10
   \                     ??main_3:
   \   000044                ; Setup parameters for call to function HalAdcCheckVdd
   \   000044   794A         MOV     R1,#0x4a
   \   000046   12....       LCALL   ??HalAdcCheckVdd?relay
   \   000049   E9           MOV     A,R1
   \   00004A   60F8         JZ      ??main_3
   \   00004C   1E           DEC     R6
   \   00004D   EE           MOV     A,R6
   \   00004E   70F4         JNZ     ??main_3
    111          
    112            // Initialize board I/O
    113            InitBoard( OB_COLD );
   \   000050                ; Setup parameters for call to function InitBoard
   \   000050   7900         MOV     R1,#0x0
   \   000052   12....       LCALL   ??InitBoard?relay
    114            for(i=0;i<1000;i++)
    115                for(j=0;j<6000;j++);
    116            
    117            // Initialze HAL drivers
    118            HalDriverInit();
   \   000055                ; Setup parameters for call to function HalDriverInit
   \   000055   12....       LCALL   ??HalDriverInit?relay
    119          
    120            // Initialize NV System
    121            osal_nv_init( NULL );
   \   000058                ; Setup parameters for call to function osal_nv_init
   \   000058   7A00         MOV     R2,#0x0
   \   00005A   7B00         MOV     R3,#0x0
   \   00005C   12....       LCALL   ??osal_nv_init?relay
    122          
    123            //Set channel,panid
    124            ParaProcess();
   \   00005F                ; Setup parameters for call to function ParaProcess
   \   00005F   12....       LCALL   ??ParaProcess?relay
    125           
    126            // Initialize the MAC
    127            ZMacInit();
   \   000062                ; Setup parameters for call to function ZMacInit
   \   000062   12....       LCALL   ??ZMacInit?relay
    128          
    129            // Determine the extended address
    130            zmain_ext_addr();
   \   000065                ; Setup parameters for call to function zmain_ext_addr
   \   000065   12....       LCALL   ??zmain_ext_addr?relay
    131          
    132          #if defined ZCL_KEY_ESTABLISH
    133            // Initialize the Certicom certificate information.
    134            zmain_cert_init();
    135          #endif
    136          
    137            // Initialize basic NV items
    138            zgInit();
   \   000068                ; Setup parameters for call to function zgInit
   \   000068   12....       LCALL   ??zgInit?relay
    139          
    140          #ifndef NONWK
    141            // Since the AF isn't a task, call it's initialization routine
    142            afInit();
    143          #endif
    144          
    145            // Initialize the operating system
    146            osal_init_system();
   \   00006B                ; Setup parameters for call to function osal_init_system
   \   00006B   12....       LCALL   ??osal_init_system?relay
    147          
    148            // Allow interrupts
    149            osal_int_enable( INTS_ALL );
   \   00006E                ; Setup parameters for call to function osal_int_enable
   \   00006E   79FF         MOV     R1,#-0x1
   \   000070   12....       LCALL   ??osal_int_enable?relay
    150          
    151            // Final board initialization
    152            InitBoard( OB_READY );
   \   000073                ; Setup parameters for call to function InitBoard
   \   000073   7902         MOV     R1,#0x2
   \   000075   12....       LCALL   ??InitBoard?relay
    153          
    154            // Display information about tdevicehis device
    155            zmain_dev_info();
   \   000078                ; Setup parameters for call to function zmain_dev_info
   \   000078   12....       LCALL   ??zmain_dev_info?relay
    156          
    157            /* Display the  info on the LCD */
    158          #ifdef LCD_SUPPORTED
    159            zmain_lcd_init();
   \   00007B                ; Setup parameters for call to function HalLcdWriteString
   \   00007B   7901         MOV     R1,#0x1
   \   00007D   7A..         MOV     R2,#`?<Constant "TexasInstruments">` & 0xff
   \   00007F   7B..         MOV     R3,#(`?<Constant "TexasInstruments">` >> 8) & 0xff
   \   000081   12....       LCALL   ??HalLcdWriteString?relay
    160          #endif
    161            
    162          #ifdef WDT_IN_PM1
    163            /* If WDT is used, this is a good place to enable it. */
    164            WatchDogEnable( WDTIMX );
    165          #endif
    166          
    167            osal_start_system(); // No Return from here
   \   000084                ; Setup parameters for call to function osal_start_system
   \   000084   12....       LCALL   ??osal_start_system?relay
    168          
    169            return 0;  // Shouldn't get here.
   \   000087   7A00         MOV     R2,#0x0
   \   000089   7B00         MOV     R3,#0x0
   \   00008B   02....       LJMP    ?BRET
   \   00008E                REQUIRE SLEEPCMD
   \   00008E                REQUIRE SLEEPSTA
   \   00008E                REQUIRE CLKCONCMD
   \   00008E                REQUIRE CLKCONSTA
   \   00008E                REQUIRE _A_P2
   \   00008E                REQUIRE P2DIR
   \   00008E                REQUIRE _A_P0
   \   00008E                REQUIRE P0DIR
   \   00008E                REQUIRE P1INP
    170          } // main()
    171          
    172          /*********************************************************************
    173           * @fn      zmain_vdd_check
    174           * @brief   Check if the Vdd is OK to run the processor.
    175           * @return  Return if Vdd is ok; otherwise, flash LED, then reset
    176           *********************************************************************/
    177          static void zmain_vdd_check( void )
    178          {
    179            uint8 cnt = 16;
    180          
    181            do {
    182              while (!HalAdcCheckVdd(VDD_MIN_RUN));
    183            } while (--cnt);
    184          }
    185          
    186          /**************************************************************************************************
    187           * @fn          zmain_ext_addr
    188           *
    189           * @brief       Execute a prioritized search for a valid extended address and write the results
    190           *              into the OSAL NV system for use by the system. Temporary address not saved to NV.
    191           *
    192           * input parameters
    193           *
    194           * None.
    195           *
    196           * output parameters
    197           *
    198           * None.
    199           *
    200           * @return      None.
    201           **************************************************************************************************
    202           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    203          static void zmain_ext_addr(void)
   \                     zmain_ext_addr:
    204          {
   \   000000   74F5         MOV     A,#-0xb
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 11
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    205            uint8 nullAddr[Z_EXTADDR_LEN] = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};
   \   00000A   7402         MOV     A,#0x2
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   AC82         MOV     R4,DPL
   \   000011   AD83         MOV     R5,DPH
   \   000013   7583..       MOV     DPH,#(`?<Constant {255, 255, 255, 255, 255, 255, 255,` >> 8) & 0xff
   \   000016   7582..       MOV     DPL,#`?<Constant {255, 255, 255, 255, 255, 255, 255,` & 0xff
   \   000019   7408         MOV     A,#0x8
   \   00001B   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
    206            uint8 writeNV = TRUE;
    207          
    208            // First check whether a non-erased extended address exists in the OSAL NV.
    209            if ((SUCCESS != osal_nv_item_init(ZCD_NV_EXTADDR, Z_EXTADDR_LEN, NULL))  ||
    210                (SUCCESS != osal_nv_read(ZCD_NV_EXTADDR, 0, Z_EXTADDR_LEN, aExtendedAddress)) ||
    211                (osal_memcmp(aExtendedAddress, nullAddr, Z_EXTADDR_LEN)))
   \   00001E                ; Setup parameters for call to function osal_nv_item_init
   \   00001E   F5..         MOV     ?V0 + 0,A
   \   000020   F5..         MOV     ?V0 + 1,A
   \   000022   78..         MOV     R0,#?V0 + 0
   \   000024   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000027   7C08         MOV     R4,#0x8
   \   000029   7D00         MOV     R5,#0x0
   \   00002B   7A01         MOV     R2,#0x1
   \   00002D   7B00         MOV     R3,#0x0
   \   00002F   12....       LCALL   ??osal_nv_item_init?relay
   \   000032   7402         MOV     A,#0x2
   \   000034   12....       LCALL   ?DEALLOC_XSTACK8
   \   000037   E9           MOV     A,R1
   \   000038   7052         JNZ     ??zmain_ext_addr_0
   \   00003A                ; Setup parameters for call to function osal_nv_read
   \   00003A   75....       MOV     ?V0 + 0,#aExtendedAddress & 0xff
   \   00003D   75....       MOV     ?V0 + 1,#(aExtendedAddress >> 8) & 0xff
   \   000040   78..         MOV     R0,#?V0 + 0
   \   000042   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000045   75..08       MOV     ?V0 + 0,#0x8
   \   000048   75..00       MOV     ?V0 + 1,#0x0
   \   00004B   78..         MOV     R0,#?V0 + 0
   \   00004D   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000050   7C00         MOV     R4,#0x0
   \   000052   7D00         MOV     R5,#0x0
   \   000054   7A01         MOV     R2,#0x1
   \   000056   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000059   12....       LCALL   ?DEALLOC_XSTACK8
   \   00005C   E9           MOV     A,R1
   \   00005D   702D         JNZ     ??zmain_ext_addr_0
   \   00005F                ; Setup parameters for call to function osal_memcmp
   \   00005F   7402         MOV     A,#0x2
   \   000061   12....       LCALL   ?XSTACK_DISP0_8
   \   000064   A982         MOV     R1,DPL
   \   000066   AA83         MOV     R2,DPH
   \   000068   89..         MOV     ?V0 + 0,R1
   \   00006A   8A..         MOV     ?V0 + 1,R2
   \   00006C   75..00       MOV     ?V0 + 2,#0x0
   \   00006F   78..         MOV     R0,#?V0 + 0
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000074   7C08         MOV     R4,#0x8
   \   000076   7D00         MOV     R5,#0x0
   \   000078   79..         MOV     R1,#aExtendedAddress & 0xff
   \   00007A   7A..         MOV     R2,#(aExtendedAddress >> 8) & 0xff
   \   00007C   7B00         MOV     R3,#0x0
   \   00007E   12....       LCALL   ??osal_memcmp?relay
   \   000081   7403         MOV     A,#0x3
   \   000083   12....       LCALL   ?DEALLOC_XSTACK8
   \   000086   E9           MOV     A,R1
   \   000087   7003         JNZ     $+5
   \   000089   02....       LJMP    ??zmain_ext_addr_1 & 0xFFFF
    212            {
    213              // Attempt to read the extended address from the location on the lock bits page
    214              // where the programming tools know to reserve it.
    215              HalFlashRead(HAL_FLASH_IEEE_PAGE, HAL_FLASH_IEEE_OSET, aExtendedAddress, Z_EXTADDR_LEN);
   \                     ??zmain_ext_addr_0:
   \   00008C                ; Setup parameters for call to function HalFlashRead
   \   00008C   75..08       MOV     ?V0 + 0,#0x8
   \   00008F   75..00       MOV     ?V0 + 1,#0x0
   \   000092   78..         MOV     R0,#?V0 + 0
   \   000094   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000097   7C..         MOV     R4,#aExtendedAddress & 0xff
   \   000099   7D..         MOV     R5,#(aExtendedAddress >> 8) & 0xff
   \   00009B   7AE8         MOV     R2,#-0x18
   \   00009D   7B07         MOV     R3,#0x7
   \   00009F   797F         MOV     R1,#0x7f
   \   0000A1   12....       LCALL   ??HalFlashRead?relay
   \   0000A4   7402         MOV     A,#0x2
   \   0000A6   12....       LCALL   ?DEALLOC_XSTACK8
    216          
    217              if (osal_memcmp(aExtendedAddress, nullAddr, Z_EXTADDR_LEN))
   \   0000A9                ; Setup parameters for call to function osal_memcmp
   \   0000A9   7402         MOV     A,#0x2
   \   0000AB   12....       LCALL   ?XSTACK_DISP0_8
   \   0000AE   A982         MOV     R1,DPL
   \   0000B0   AA83         MOV     R2,DPH
   \   0000B2   89..         MOV     ?V0 + 0,R1
   \   0000B4   8A..         MOV     ?V0 + 1,R2
   \   0000B6   75..00       MOV     ?V0 + 2,#0x0
   \   0000B9   78..         MOV     R0,#?V0 + 0
   \   0000BB   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000BE   7C08         MOV     R4,#0x8
   \   0000C0   7D00         MOV     R5,#0x0
   \   0000C2   79..         MOV     R1,#aExtendedAddress & 0xff
   \   0000C4   7A..         MOV     R2,#(aExtendedAddress >> 8) & 0xff
   \   0000C6   7B00         MOV     R3,#0x0
   \   0000C8   12....       LCALL   ??osal_memcmp?relay
   \   0000CB   7403         MOV     A,#0x3
   \   0000CD   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000D0   E9           MOV     A,R1
   \   0000D1   6038         JZ      ??zmain_ext_addr_2
    218              {
    219                // Attempt to read the extended address from the designated location in the Info Page.
    220                if (!osal_memcmp((uint8 *)(P_INFOPAGE+HAL_INFOP_IEEE_OSET), nullAddr, Z_EXTADDR_LEN))
   \   0000D3                ; Setup parameters for call to function osal_memcmp
   \   0000D3   78..         MOV     R0,#?V0 + 0
   \   0000D5   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000D8   7C08         MOV     R4,#0x8
   \   0000DA   7D00         MOV     R5,#0x0
   \   0000DC   790C         MOV     R1,#0xc
   \   0000DE   7A78         MOV     R2,#0x78
   \   0000E0   7B00         MOV     R3,#0x0
   \   0000E2   12....       LCALL   ??osal_memcmp?relay
   \   0000E5   7403         MOV     A,#0x3
   \   0000E7   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000EA   E9           MOV     A,R1
   \   0000EB   6003         JZ      $+5
   \   0000ED   02....       LJMP    ??zmain_ext_addr_3 & 0xFFFF
    221                {
    222                  osal_memcpy(aExtendedAddress, (uint8 *)(P_INFOPAGE+HAL_INFOP_IEEE_OSET), Z_EXTADDR_LEN);
   \   0000F0                ; Setup parameters for call to function osal_memcpy
   \   0000F0   75..0C       MOV     ?V0 + 0,#0xc
   \   0000F3   75..78       MOV     ?V0 + 1,#0x78
   \   0000F6   78..         MOV     R0,#?V0 + 0
   \   0000F8   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   0000FB   7C08         MOV     R4,#0x8
   \   0000FD   7D00         MOV     R5,#0x0
   \   0000FF   7A..         MOV     R2,#aExtendedAddress & 0xff
   \   000101   7B..         MOV     R3,#(aExtendedAddress >> 8) & 0xff
   \   000103   12....       LCALL   ??osal_memcpy?relay
   \   000106   7403         MOV     A,#0x3
   \   000108   12....       LCALL   ?DEALLOC_XSTACK8
    223                }
    224                else  // No valid extended address was found.
    225                {
    226                  uint8 idx;
    227          
    228          #if !defined ( NV_RESTORE )
    229                  writeNV = FALSE;  // Make this a temporary IEEE address
    230          #endif
    231          
    232                  /* Attempt to create a sufficiently random extended address for expediency.
    233                   * Note: this is only valid/legal in a test environment and
    234                   *       must never be used for a commercial product.
    235                   */
    236                  for (idx = 0; idx < (Z_EXTADDR_LEN - 2);)
    237                  {
    238                    uint16 randy = osal_rand();
    239                    aExtendedAddress[idx++] = LO_UINT16(randy);
    240                    aExtendedAddress[idx++] = HI_UINT16(randy);
    241                  }
    242                  // Next-to-MSB identifies ZigBee devicetype.
    243          #if ZG_BUILD_COORDINATOR_TYPE && !ZG_BUILD_JOINING_TYPE
    244                  aExtendedAddress[idx++] = 0x10;
    245          #elif ZG_BUILD_RTRONLY_TYPE
    246                  aExtendedAddress[idx++] = 0x20;
    247          #else
    248                  aExtendedAddress[idx++] = 0x30;
    249          #endif
    250                  // MSB has historical signficance.
    251                  aExtendedAddress[idx] = 0xF8;
    252                }
    253              }
    254          
    255              if (writeNV)
    256              {
    257                (void)osal_nv_write(ZCD_NV_EXTADDR, 0, Z_EXTADDR_LEN, aExtendedAddress);
   \                     ??zmain_ext_addr_2:
   \   00010B                ; Setup parameters for call to function osal_nv_write
   \   00010B   75....       MOV     ?V0 + 0,#aExtendedAddress & 0xff
   \   00010E   75....       MOV     ?V0 + 1,#(aExtendedAddress >> 8) & 0xff
   \   000111   78..         MOV     R0,#?V0 + 0
   \   000113   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000116   75..08       MOV     ?V0 + 0,#0x8
   \   000119   75..00       MOV     ?V0 + 1,#0x0
   \   00011C   78..         MOV     R0,#?V0 + 0
   \   00011E   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000121   7C00         MOV     R4,#0x0
   \   000123   7D00         MOV     R5,#0x0
   \   000125   7A01         MOV     R2,#0x1
   \   000127   7B00         MOV     R3,#0x0
   \   000129   12....       LCALL   ??osal_nv_write?relay
   \   00012C   7404         MOV     A,#0x4
   \   00012E   12....       LCALL   ?DEALLOC_XSTACK8
    258              }
    259            }
    260              // add by kkk
    261              if(zgConfigPANID == 0xFFFF)
   \                     ??zmain_ext_addr_1:
   \   000131   90....       MOV     DPTR,#zgConfigPANID
   \   000134   E0           MOVX    A,@DPTR
   \   000135   F4           CPL     A
   \   000136   7003         JNZ     ??zmain_ext_addr_4
   \   000138   A3           INC     DPTR
   \   000139   E0           MOVX    A,@DPTR
   \   00013A   F4           CPL     A
   \                     ??zmain_ext_addr_4:
   \   00013B   7035         JNZ     ??zmain_ext_addr_5
    262              {
    263                  uint8 pid[2];
    264                  HalFlashRead(HAL_FLASH_IEEE_PAGE, HAL_FLASH_PID_OSET, pid, HAL_FLASH_PID_SIZE);
   \   00013D                ; Setup parameters for call to function HalFlashRead
   \   00013D   75..02       MOV     ?V0 + 0,#0x2
   \   000140   75..00       MOV     ?V0 + 1,#0x0
   \   000143   78..         MOV     R0,#?V0 + 0
   \   000145   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000148   7402         MOV     A,#0x2
   \   00014A   12....       LCALL   ?XSTACK_DISP0_8
   \   00014D   AC82         MOV     R4,DPL
   \   00014F   AD83         MOV     R5,DPH
   \   000151   7A00         MOV     R2,#0x0
   \   000153   7B00         MOV     R3,#0x0
   \   000155   797F         MOV     R1,#0x7f
   \   000157   12....       LCALL   ??HalFlashRead?relay
   \   00015A   7402         MOV     A,#0x2
   \   00015C   12....       LCALL   ?DEALLOC_XSTACK8
    265                  zgConfigPANID = *(uint16 *)pid;
   \   00015F   85..82       MOV     DPL,?XSP + 0
   \   000162   85..83       MOV     DPH,?XSP + 1
   \   000165   E0           MOVX    A,@DPTR
   \   000166   F8           MOV     R0,A
   \   000167   A3           INC     DPTR
   \   000168   E0           MOVX    A,@DPTR
   \   000169   F9           MOV     R1,A
   \   00016A   90....       MOV     DPTR,#zgConfigPANID
   \   00016D   E8           MOV     A,R0
   \   00016E   F0           MOVX    @DPTR,A
   \   00016F   A3           INC     DPTR
   \   000170   E9           MOV     A,R1
   \   000171   F0           MOVX    @DPTR,A
    266              }
    267              // end of add
    268          
    269            // Set the MAC PIB extended address according to results from above.
    270            (void)ZMacSetReq(MAC_EXTENDED_ADDRESS, aExtendedAddress);
   \                     ??zmain_ext_addr_5:
   \   000172                ; Setup parameters for call to function ZMacSetReq
   \   000172   7A..         MOV     R2,#aExtendedAddress & 0xff
   \   000174   7B..         MOV     R3,#(aExtendedAddress >> 8) & 0xff
   \   000176   79E2         MOV     R1,#-0x1e
   \   000178   12....       LCALL   ??ZMacSetReq?relay
    271          }
   \   00017B   740A         MOV     A,#0xa
   \   00017D   12....       LCALL   ?DEALLOC_XSTACK8
   \   000180   7F03         MOV     R7,#0x3
   \   000182   02....       LJMP    ?BANKED_LEAVE_XDATA
   \                     ??zmain_ext_addr_3:
   \   000185   7E00         MOV     R6,#0x0
   \                     ??zmain_ext_addr_6:
   \   000187                ; Setup parameters for call to function osal_rand
   \   000187   12....       LCALL   ??osal_rand?relay
   \   00018A   8A..         MOV     ?V0 + 0,R2
   \   00018C   A8..         MOV     R0,?V0 + 0
   \   00018E   12....       LCALL   ?Subroutine0 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   000191   E8           MOV     A,R0
   \   000192   F0           MOVX    @DPTR,A
   \   000193   0E           INC     R6
   \   000194   12....       LCALL   ?Subroutine0 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   000197   EB           MOV     A,R3
   \   000198   F0           MOVX    @DPTR,A
   \   000199   0E           INC     R6
   \   00019A   EE           MOV     A,R6
   \   00019B   C3           CLR     C
   \   00019C   9406         SUBB    A,#0x6
   \   00019E   40E7         JC      ??zmain_ext_addr_6
   \   0001A0   12....       LCALL   ?Subroutine0 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   0001A3   7430         MOV     A,#0x30
   \   0001A5   F0           MOVX    @DPTR,A
   \   0001A6   7401         MOV     A,#0x1
   \   0001A8   2E           ADD     A,R6
   \   0001A9   F8           MOV     R0,A
   \   0001AA   74..         MOV     A,#aExtendedAddress & 0xff
   \   0001AC   28           ADD     A,R0
   \   0001AD   F582         MOV     DPL,A
   \   0001AF   74..         MOV     A,#(aExtendedAddress >> 8) & 0xff
   \   0001B1   3400         ADDC    A,#0x0
   \   0001B3   F583         MOV     DPH,A
   \   0001B5   74F8         MOV     A,#-0x8
   \   0001B7   F0           MOVX    @DPTR,A
   \   0001B8   02....       LJMP    ??zmain_ext_addr_1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   8E..         MOV     ?V0 + 0,R6
   \   000002   74..         MOV     A,#aExtendedAddress & 0xff
   \   000004   25..         ADD     A,?V0 + 0
   \   000006   F582         MOV     DPL,A
   \   000008   74..         MOV     A,#(aExtendedAddress >> 8) & 0xff
   \   00000A   3400         ADDC    A,#0x0
   \   00000C   F583         MOV     DPH,A
   \   00000E   22           RET
    272          
    273          #if defined ZCL_KEY_ESTABLISH
    274          /**************************************************************************************************
    275           * @fn          zmain_cert_init
    276           *
    277           * @brief       Initialize the Certicom certificate information.
    278           *
    279           * input parameters
    280           *
    281           * None.
    282           *
    283           * output parameters
    284           *
    285           * None.
    286           *
    287           * @return      None.
    288           **************************************************************************************************
    289           */
    290          static void zmain_cert_init(void)
    291          {
    292            uint8 certData[ZCL_KE_IMPLICIT_CERTIFICATE_LEN];
    293            uint8 nullData[ZCL_KE_IMPLICIT_CERTIFICATE_LEN] = {
    294              0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    295              0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    296              0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    297              0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    298              0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
    299              0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF
    300            };
    301          
    302            (void)osal_nv_item_init(ZCD_NV_IMPLICIT_CERTIFICATE, ZCL_KE_IMPLICIT_CERTIFICATE_LEN, NULL);
    303            (void)osal_nv_item_init(ZCD_NV_DEVICE_PRIVATE_KEY, ZCL_KE_DEVICE_PRIVATE_KEY_LEN, NULL);
    304          
    305            // First check whether non-null certificate data exists in the OSAL NV. To save on code space,
    306            // just use the ZCD_NV_CA_PUBLIC_KEY as the bellwether for all three.
    307            if ((SUCCESS != osal_nv_item_init(ZCD_NV_CA_PUBLIC_KEY, ZCL_KE_CA_PUBLIC_KEY_LEN, NULL))    ||
    308                (SUCCESS != osal_nv_read(ZCD_NV_CA_PUBLIC_KEY, 0, ZCL_KE_CA_PUBLIC_KEY_LEN, certData))  ||
    309                (osal_memcmp(certData, nullData, ZCL_KE_CA_PUBLIC_KEY_LEN)))
    310            {
    311              // Attempt to read the certificate data from its corresponding location on the lock bits page.
    312              HalFlashRead(HAL_FLASH_IEEE_PAGE, HAL_FLASH_CA_PUBLIC_KEY_OSET, certData,
    313                                                   ZCL_KE_CA_PUBLIC_KEY_LEN);
    314              // If the certificate data is not NULL, use it to update the corresponding NV items.
    315              if (!osal_memcmp(certData, nullData, ZCL_KE_CA_PUBLIC_KEY_LEN))
    316              {
    317                (void)osal_nv_write(ZCD_NV_CA_PUBLIC_KEY, 0, ZCL_KE_CA_PUBLIC_KEY_LEN, certData);
    318                HalFlashRead(HAL_FLASH_IEEE_PAGE, HAL_FLASH_IMPLICIT_CERT_OSET, certData,
    319                                                     ZCL_KE_IMPLICIT_CERTIFICATE_LEN);
    320                (void)osal_nv_write(ZCD_NV_IMPLICIT_CERTIFICATE, 0,
    321                                    ZCL_KE_IMPLICIT_CERTIFICATE_LEN, certData);
    322                HalFlashRead(HAL_FLASH_IEEE_PAGE, HAL_FLASH_DEV_PRIVATE_KEY_OSET, certData,
    323                                                  ZCL_KE_DEVICE_PRIVATE_KEY_LEN);
    324                (void)osal_nv_write(ZCD_NV_DEVICE_PRIVATE_KEY, 0, ZCL_KE_DEVICE_PRIVATE_KEY_LEN, certData);
    325              }
    326            }
    327          }
    328          #endif
    329          
    330          /**************************************************************************************************
    331           * @fn          zmain_dev_info
    332           *
    333           * @brief       This displays the IEEE (MSB to LSB) on the LCD.
    334           *
    335           * input parameters
    336           *
    337           * None.
    338           *
    339           * output parameters
    340           *
    341           * None.
    342           *
    343           * @return      None.
    344           **************************************************************************************************
    345           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    346          static void zmain_dev_info(void)
   \                     zmain_dev_info:
    347          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 17
   \   000005   74EF         MOV     A,#-0x11
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
    348          #ifdef LCD_SUPPORTED
    349            uint8 i;
    350            uint8 *xad;
    351            uint8 lcd_buf[Z_EXTADDR_LEN*2+1];
    352          
    353            // Display the extended address.
    354            xad = aExtendedAddress + Z_EXTADDR_LEN - 1;
   \   00000A   78..         MOV     R0,#(aExtendedAddress + 7) & 0xff
   \   00000C   79..         MOV     R1,#((aExtendedAddress + 7) >> 8) & 0xff
    355          
    356            for (i = 0; i < Z_EXTADDR_LEN*2; xad--)
   \   00000E   7C00         MOV     R4,#0x0
    357            {
    358              uint8 ch;
    359              ch = (*xad >> 4) & 0x0F;
   \                     ??zmain_dev_info_0:
   \   000010   8882         MOV     DPL,R0
   \   000012   8983         MOV     DPH,R1
   \   000014   E0           MOVX    A,@DPTR
   \   000015   C4           SWAP    A
   \   000016   540F         ANL     A,#0xf
   \   000018   FD           MOV     R5,A
    360              lcd_buf[i++] = ch + (( ch < 10 ) ? '0' : '7');
   \   000019   EC           MOV     A,R4
   \   00001A   FE           MOV     R6,A
   \   00001B   0C           INC     R4
   \   00001C   ED           MOV     A,R5
   \   00001D   C3           CLR     C
   \   00001E   940A         SUBB    A,#0xa
   \   000020   5004         JNC     ??zmain_dev_info_1
   \   000022   7A30         MOV     R2,#0x30
   \   000024   8002         SJMP    ??zmain_dev_info_2
   \                     ??zmain_dev_info_1:
   \   000026   7A37         MOV     R2,#0x37
   \                     ??zmain_dev_info_2:
   \   000028   EA           MOV     A,R2
   \   000029   2D           ADD     A,R5
   \   00002A   C0E0         PUSH    A
   \   00002C   8E..         MOV     ?V0 + 0,R6
   \   00002E   12....       LCALL   ?Subroutine1 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   000031   D0E0         POP     A
   \   000033   F0           MOVX    @DPTR,A
    361              ch = *xad & 0x0F;
   \   000034   8882         MOV     DPL,R0
   \   000036   8983         MOV     DPH,R1
   \   000038   E0           MOVX    A,@DPTR
   \   000039   540F         ANL     A,#0xf
   \   00003B   FD           MOV     R5,A
    362              lcd_buf[i++] = ch + (( ch < 10 ) ? '0' : '7');
   \   00003C   EC           MOV     A,R4
   \   00003D   FF           MOV     R7,A
   \   00003E   0C           INC     R4
   \   00003F   ED           MOV     A,R5
   \   000040   C3           CLR     C
   \   000041   940A         SUBB    A,#0xa
   \   000043   5004         JNC     ??zmain_dev_info_3
   \   000045   7A30         MOV     R2,#0x30
   \   000047   8002         SJMP    ??zmain_dev_info_4
   \                     ??zmain_dev_info_3:
   \   000049   7A37         MOV     R2,#0x37
   \                     ??zmain_dev_info_4:
   \   00004B   EA           MOV     A,R2
   \   00004C   2D           ADD     A,R5
   \   00004D   C0E0         PUSH    A
   \   00004F   8F..         MOV     ?V0 + 0,R7
   \   000051   12....       LCALL   ?Subroutine1 & 0xFFFF
    363            }
   \                     ??CrossCallReturnLabel_4:
   \   000054   D0E0         POP     A
   \   000056   F0           MOVX    @DPTR,A
   \   000057   E8           MOV     A,R0
   \   000058   24FF         ADD     A,#-0x1
   \   00005A   18           DEC     R0
   \   00005B   E9           MOV     A,R1
   \   00005C   34FF         ADDC    A,#-0x1
   \   00005E   F9           MOV     R1,A
   \   00005F   EC           MOV     A,R4
   \   000060   C3           CLR     C
   \   000061   9410         SUBB    A,#0x10
   \   000063   40AB         JC      ??zmain_dev_info_0
    364            lcd_buf[Z_EXTADDR_LEN*2] = '\0';
   \   000065   7410         MOV     A,#0x10
   \   000067   12....       LCALL   ?XSTACK_DISP0_8
   \   00006A   E4           CLR     A
   \   00006B   F0           MOVX    @DPTR,A
    365            HalLcdWriteString( "IEEE: ", HAL_LCD_LINE_1 );
   \   00006C                ; Setup parameters for call to function HalLcdWriteString
   \   00006C   7901         MOV     R1,#0x1
   \   00006E   7A..         MOV     R2,#`?<Constant "IEEE: ">` & 0xff
   \   000070   7B..         MOV     R3,#(`?<Constant "IEEE: ">` >> 8) & 0xff
   \   000072   12....       LCALL   ??HalLcdWriteString?relay
    366            HalLcdWriteString( (char*)lcd_buf, HAL_LCD_LINE_2 );
   \   000075                ; Setup parameters for call to function HalLcdWriteString
   \   000075   7902         MOV     R1,#0x2
   \   000077   85..82       MOV     DPL,?XSP + 0
   \   00007A   85..83       MOV     DPH,?XSP + 1
   \   00007D   AA82         MOV     R2,DPL
   \   00007F   AB83         MOV     R3,DPH
   \   000081   12....       LCALL   ??HalLcdWriteString?relay
    367          #endif
    368          }
   \   000084   7411         MOV     A,#0x11
   \   000086   12....       LCALL   ?DEALLOC_XSTACK8
   \   000089   7F02         MOV     R7,#0x2
   \   00008B   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   85..82       MOV     DPL,?XSP + 0
   \   000003   85..83       MOV     DPH,?XSP + 1
   \   000006   E582         MOV     A,DPL
   \   000008   25..         ADD     A,?V0 + 0
   \   00000A   F582         MOV     DPL,A
   \   00000C   E583         MOV     A,DPH
   \   00000E   3400         ADDC    A,#0x0
   \   000010   F583         MOV     DPH,A
   \   000012   22           RET

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ParaProcess?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ParaProcess

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??main?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    main

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zmain_ext_addr?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zmain_ext_addr

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??zmain_dev_info?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zmain_dev_info

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {255, 255, 255, 255, 255, 255, 255,`:
   \   000000   FF           DB 255
   \   000001   FF           DB 255
   \   000002   FF           DB 255
   \   000003   FF           DB 255
   \   000004   FF           DB 255
   \   000005   FF           DB 255
   \   000006   FF           DB 255
   \   000007   FF           DB 255

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "IEEE: ">`:
   \   000000   49454545     DB "IEEE: "
   \            3A2000  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "TexasInstruments">`:
   \   000000   54657861     DB "TexasInstruments"
   \            73496E73
   \            7472756D
   \            656E7473
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_800:
   \   000000   00080000     DD 2048

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1000:
   \   000000   00100000     DD 4096

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_2000:
   \   000000   00200000     DD 8192

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_4000:
   \   000000   00400000     DD 16384

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_8000:
   \   000000   00800000     DD 32768

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_10000:
   \   000000   00000100     DD 65536

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_20000:
   \   000000   00000200     DD 131072

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_40000:
   \   000000   00000400     DD 262144

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_80000:
   \   000000   00000800     DD 524288

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_100000:
   \   000000   00001000     DD 1048576

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_200000:
   \   000000   00002000     DD 2097152

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_400000:
   \   000000   00004000     DD 4194304

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_800000:
   \   000000   00008000     DD 8388608

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1000000:
   \   000000   00000001     DD 16777216

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_2000000:
   \   000000   00000002     DD 33554432

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_4000000:
   \   000000   00000004     DD 67108864
    369          
    370          #ifdef LCD_SUPPORTED
    371          /*********************************************************************
    372           * @fn      zmain_lcd_init
    373           * @brief   Initialize LCD at start up.
    374           * @return  none
    375           *********************************************************************/
    376          static void zmain_lcd_init ( void )
    377          {
    378          #ifdef SERIAL_DEBUG_SUPPORTED
    379            {
    380              HalLcdWriteString( "TexasInstruments", HAL_LCD_LINE_1 );
    381          
    382          #if defined( MT_MAC_FUNC )
    383          #if defined( ZDO_COORDINATOR )
    384                HalLcdWriteString( "MAC-MT Coord", HAL_LCD_LINE_2 );
    385          #else
    386                HalLcdWriteString( "MAC-MT Device", HAL_LCD_LINE_2 );
    387          #endif // ZDO
    388          #elif defined( MT_NWK_FUNC )
    389          #if defined( ZDO_COORDINATOR )
    390                HalLcdWriteString( "NWK Coordinator", HAL_LCD_LINE_2 );
    391          #else
    392                HalLcdWriteString( "NWK Device", HAL_LCD_LINE_2 );
    393          #endif // ZDO
    394          #endif // MT_FUNC
    395            }
    396          #endif // SERIAL_DEBUG_SUPPORTED
    397          }
    398          #endif
    399          
    400          /*********************************************************************
    401          *********************************************************************/

   Maximum stack usage in bytes:

     Function               ISTACK PSTACK XSTACK
     --------               ------ ------ ------
     ParaProcess                2      0     16
       -> osal_nv_read          0      0     32
       -> osal_nv_read          0      0     32
       -> osal_nv_read          0      0     32
     main                       0      0      0
       -> osal_int_disable      0      0      0
       -> HalAdcCheckVdd        0      0      0
       -> InitBoard             0      0      0
       -> HalDriverInit         0      0      0
       -> osal_nv_init          0      0      0
       -> ParaProcess           0      0      0
       -> ZMacInit              0      0      0
       -> zmain_ext_addr        0      0      0
       -> zgInit                0      0      0
       -> osal_init_system      0      0      0
       -> osal_int_enable       0      0      0
       -> InitBoard             0      0      0
       -> zmain_dev_info        0      0      0
       -> HalLcdWriteString     0      0      0
       -> osal_start_system     0      0      0
     zmain_dev_info             1      0     27
       -> HalLcdWriteString     0      0     54
       -> HalLcdWriteString     0      0     54
     zmain_ext_addr             2      0     25
       -> osal_nv_item_init     0      0     46
       -> osal_nv_read          0      0     50
       -> osal_memcmp           0      0     48
       -> HalFlashRead          0      0     46
       -> osal_memcmp           0      0     48
       -> osal_memcmp           0      0     48
       -> osal_memcpy           0      0     48
       -> osal_nv_write         0      0     50
       -> HalFlashRead          0      0     46
       -> ZMacSetReq            0      0     42
       -> osal_rand             0      0     42


   Segment part sizes:

     Function/Label                                 Bytes
     --------------                                 -----
     _A_P0                                             1
     SLEEPSTA                                          1
     CLKCONSTA                                         1
     _A_P2                                             1
     SLEEPCMD                                          1
     CLKCONCMD                                         1
     P1INP                                             1
     P0DIR                                             1
     P2DIR                                             1
     ParaProcess                                     533
     ?Subroutine2                                      2
     ??Subroutine3_0                                   6
     main                                            142
     zmain_ext_addr                                  443
     ?Subroutine0                                     15
     zmain_dev_info                                  142
     ?Subroutine1                                     19
     ??ParaProcess?relay                               6
     ??main?relay                                      6
     ??zmain_ext_addr?relay                            6
     ??zmain_dev_info?relay                            6
     ?<Constant {255, 255, 255, 255, 255, 255, 255,    8
     ?<Constant "IEEE: ">                              7
     ?<Constant "TexasInstruments">                   17
     __Constant_800                                    4
     __Constant_1000                                   4
     __Constant_2000                                   4
     __Constant_4000                                   4
     __Constant_8000                                   4
     __Constant_10000                                  4
     __Constant_20000                                  4
     __Constant_40000                                  4
     __Constant_80000                                  4
     __Constant_100000                                 4
     __Constant_200000                                 4
     __Constant_400000                                 4
     __Constant_800000                                 4
     __Constant_1000000                                4
     __Constant_2000000                                4
     __Constant_4000000                                4

 
 1 302 bytes in segment BANKED_CODE
    24 bytes in segment BANK_RELAYS
     9 bytes in segment SFR_AN
    96 bytes in segment XDATA_ROM_C
 
 1 326 bytes of CODE  memory
    32 bytes of CONST memory (+ 64 bytes shared)
     0 bytes of DATA  memory (+  9 bytes shared)

Errors: none
Warnings: none
